{% extends "baseHome.html" %}

{% block title %}Carrito{% endblock %}

{% block content %}
<div class="container py-4">
{% if request.session.carrito.items %}
<div class="container">
    <div class="row">
      <div class="col-12 col-sm-8 col-lg-12">
        <h4>Productos</h4>
{% for key, value in request.session.carrito.items %}
        <h6 class="text-muted"></h6> 
        <ul class="list-group">
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <h6>Nombre del Producto:</h6>
                <p>{{value.nombre}}</p>
                <h6>Precio Unitario:</h6>
                <p>${{value.precio}}</p>
                <h6>Cantidad:</h6>
                <p>{{value.cantidad}}</p>
                <h6>SUB TOTAL:</h6>
                <p>${{value.sub_total}}</p>
                <form action="/eliminar_carrito/{{value.producto_id}}" method="get">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger"
                    aria-label="Eliminar Producto"><i class="bi bi-trash3-fill"></i></button>
                </form>
                <form action="/agregar_carrito/{{value.producto_id}}" method="get">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary"
                    aria-label="AÃ±adir Producto"><i class="bi bi-plus-square-fill"></i></button>
                </form>
                <form action="/restar_carrito/{{value.producto_id}}" method="get">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary"
                    aria-label="Restar Producto"><i class="bi bi-dash-lg"></i></button>
                </form>
            </div>
            <div class="image-parent">
            {% if value.imagen %}
                <img src="{{value.imagen}}" class="card-img-top" alt="...">
            {% endif %}
            </div>
          </li>
        </ul>
{% endfor %}
      </div>
    </div>
</div>
{% else %}
<div class="card">
    <div class="card-header bg-danger">
    NO HAY PRODUCTOS EN EL CARRITO
    </div>
    <div class="card-body">
    <h5 class="card-title">Vuelve a la tienda para agregar productos a tu carrito!</h5>
    <p class="card-text">Tenemos increibles productos para ti...</p>
    <a href="../" class="btn btn-primary">Tienda</a>
    </div>
</div>
{% endif %}


</div>

{% endblock %}